<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo QR Code - Nh√† h√†ng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        body { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .container { padding-top: 20px; }
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            background: rgba(255,255,255,0.95);
            margin-bottom: 20px;
        }
        .card-header {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border-radius: 15px 15px 0 0 !important;
            border: none;
            padding: 20px;
        }
        .qr-demo-container {
            text-align: center;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            margin: 20px 0;
        }
        .qr-demo-container img {
            max-width: 200px;
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            margin: 20px 0;
        }
        .demo-table {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .demo-table h5 {
            color: #007bff;
            margin-bottom: 15px;
        }
        .demo-table .qr-code {
            text-align: center;
            margin: 15px 0;
        }
        .demo-table .qr-code img {
            max-width: 150px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .demo-table .table-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
        }
        .demo-table .table-info h6 {
            color: #1976d2;
            margin-bottom: 10px;
        }
        .demo-table .table-info p {
            margin: 5px 0;
            color: #424242;
        }
        .demo-table .table-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        .btn-demo {
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        .btn-demo:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .btn-primary-demo {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
        }
        .btn-success-demo {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
        }
        .btn-info-demo {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
            border: none;
        }
        .instructions {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 1px solid #ffc107;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        .instructions h4 {
            color: #856404;
            margin-bottom: 15px;
        }
        .instructions ol {
            color: #856404;
            margin-bottom: 0;
        }
        .instructions li {
            margin-bottom: 8px;
        }
        .mobile-preview {
            background: #2c3e50;
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            color: white;
        }
        .mobile-preview h5 {
            color: #3498db;
            margin-bottom: 15px;
        }
        .mobile-preview .phone-frame {
            background: #34495e;
            border-radius: 15px;
            padding: 15px;
            margin: 15px 0;
            display: inline-block;
        }
        .mobile-preview .phone-screen {
            background: white;
            border-radius: 10px;
            padding: 20px;
            color: #2c3e50;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .mobile-preview .phone-screen h6 {
            color: #007bff;
            margin-bottom: 10px;
        }
        .mobile-preview .phone-screen p {
            margin: 5px 0;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header text-center">
                        <h1 class="mb-0">
                            <i class="fas fa-qrcode me-3"></i>
                            Demo QR Code Nh√† H√†ng
                        </h1>
                        <p class="mb-0 mt-2 opacity-75">H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng QR code ƒë·ªÉ truy c·∫≠p menu</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <h4><i class="fas fa-info-circle me-2"></i>H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</h4>
            <ol>
                <li><strong>Qu√©t QR code:</strong> S·ª≠ d·ª•ng camera ƒëi·ªán tho·∫°i ho·∫∑c app qu√©t QR code</li>
                <li><strong>Truy c·∫≠p menu:</strong> Sau khi qu√©t, b·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang menu c·ªßa b√†n</li>
                <li><strong>ƒê·∫∑t m√≥n:</strong> Ch·ªçn m√≥n ƒÉn v√† s·ªë l∆∞·ª£ng, sau ƒë√≥ g·ª≠i order</li>
                <li><strong>Theo d√µi:</strong> S·ª≠ d·ª•ng chatbot ƒë·ªÉ theo d√µi tr·∫°ng th√°i ƒë∆°n h√†ng</li>
            </ol>
        </div>

        <!-- Demo Tables -->
        <div class="row">
            <div class="col-md-6">
                <div class="demo-table">
                    <h5><i class="fas fa-table me-2"></i>B√†n 1 - Khu A</h5>
                    <div class="table-info">
                        <h6><i class="fas fa-info-circle me-2"></i>Th√¥ng tin b√†n</h6>
                        <p><i class="fas fa-users me-2"></i>S·ª©c ch·ª©a: 4 ng∆∞·ªùi</p>
                        <p><i class="fas fa-map-marker-alt me-2"></i>V·ªã tr√≠: T·∫ßng 1 - Khu A</p>
                        <p><i class="fas fa-clock me-2"></i>Tr·∫°ng th√°i: <span class="badge bg-success">Tr·ªëng</span></p>
                    </div>
                    <div class="qr-code">
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==" 
                             alt="QR Code B√†n 1" id="qr-table-1">
                        <p class="text-muted mt-2">QR Code cho B√†n 1</p>
                    </div>
                    <div class="table-actions">
                        <a href="/mobile_menu?table_id=table_1" class="btn btn-primary-demo btn-demo">
                            <i class="fas fa-external-link-alt"></i>Xem Menu
                        </a>
                        <button class="btn btn-success-demo btn-demo" onclick="generateQR('table_1', 'B√†n 1')">
                            <i class="fas fa-qrcode"></i>T·∫°o QR
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="demo-table">
                    <h5><i class="fas fa-table me-2"></i>B√†n 2 - Khu B</h5>
                    <div class="table-info">
                        <h6><i class="fas fa-info-circle me-2"></i>Th√¥ng tin b√†n</h6>
                        <p><i class="fas fa-users me-2"></i>S·ª©c ch·ª©a: 6 ng∆∞·ªùi</p>
                        <p><i class="fas fa-map-marker-alt me-2"></i>V·ªã tr√≠: T·∫ßng 1 - Khu B</p>
                        <p><i class="fas fa-clock me-2"></i>Tr·∫°ng th√°i: <span class="badge bg-warning">ƒêang s·ª≠ d·ª•ng</span></p>
                    </div>
                    <div class="qr-code">
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==" 
                             alt="QR Code B√†n 2" id="qr-table-2">
                        <p class="text-muted mt-2">QR Code cho B√†n 2</p>
                    </div>
                    <div class="table-actions">
                        <a href="/mobile_menu?table_id=table_2" class="btn btn-primary-demo btn-demo">
                            <i class="fas fa-external-link-alt"></i>Xem Menu
                        </a>
                        <button class="btn btn-success-demo btn-demo" onclick="generateQR('table_2', 'B√†n 2')">
                            <i class="fas fa-qrcode"></i>T·∫°o QR
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Preview -->
        <div class="mobile-preview">
            <h5><i class="fas fa-mobile-alt me-2"></i>Xem tr∆∞·ªõc tr√™n ƒëi·ªán tho·∫°i</h5>
            <div class="phone-frame">
                <div class="phone-screen">
                    <h6>üçΩÔ∏è Menu Nh√† H√†ng</h6>
                    <p id="preview-table-info">Ch·ªçn m√≥n, tick v√†o m√≥n ƒë·ªÉ ch·ªçn v√† nh·∫•n "G·ª≠i order"!</p>
                    <div class="mt-3">
                        <button class="btn btn-sm btn-primary" onclick="updatePreview('table_1')">B√†n 1</button>
                        <button class="btn btn-sm btn-primary ms-2" onclick="updatePreview('table_2')">B√†n 2</button>
                    </div>
                </div>
            </div>
            <p class="text-muted">M√¥ ph·ªèng giao di·ªán tr√™n ƒëi·ªán tho·∫°i</p>
        </div>

        <!-- QR Scanner Link -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body text-center">
                        <h5 class="mb-3">Qu√©t QR Code th·ª±c t·∫ø</h5>
                        <p class="text-muted mb-3">S·ª≠ d·ª•ng trang qu√©t QR code ƒë·ªÉ truy c·∫≠p menu nh√† h√†ng</p>
                        <a href="/qr-scanner" class="btn btn-success-demo btn-demo">
                            <i class="fas fa-qrcode"></i>M·ªü QR Scanner
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Links -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body text-center">
                        <h5 class="mb-3">Qu·∫£n l√Ω h·ªá th·ªëng</h5>
                        <div class="d-flex justify-content-center gap-3 flex-wrap">
                            <a href="/admin/tables" class="btn btn-info-demo btn-demo">
                                <i class="fas fa-table"></i>Qu·∫£n l√Ω b√†n
                            </a>
                            <a href="/admin/bills" class="btn btn-primary-demo btn-demo">
                                <i class="fas fa-receipt"></i>Qu·∫£n l√Ω h√≥a ƒë∆°n
                            </a>
                            <a href="/admin/status" class="btn btn-warning btn-demo">
                                <i class="fas fa-cog"></i>Qu·∫£n l√Ω m√≥n ƒÉn
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Generate QR code for tables
        async function generateQR(tableId, tableName) {
            try {
                const response = await fetch('/api/tables');
                const data = await response.json();
                const table = data.tables.find(t => t.id === tableId);
                
                if (table && table.qr_code) {
                    // Update QR code image
                    document.getElementById(`qr-${tableId}`).src = table.qr_code;
                    
                    // Show success message
                    alert(`ƒê√£ t·∫°o QR code cho ${tableName}!`);
                } else {
                    alert('Kh√¥ng th·ªÉ t·∫°o QR code. Vui l√≤ng th·ª≠ l·∫°i sau.');
                }
            } catch (error) {
                console.error('Error generating QR:', error);
                alert('C√≥ l·ªói khi t·∫°o QR code');
            }
        }

        // Update mobile preview
        function updatePreview(tableId) {
            const previewElement = document.getElementById('preview-table-info');
            if (tableId === 'table_1') {
                previewElement.innerHTML = `B√†n 1 - Ch·ªçn m√≥n, tick v√†o m√≥n ƒë·ªÉ ch·ªçn v√† nh·∫•n "G·ª≠i order"!`;
            } else if (tableId === 'table_2') {
                previewElement.innerHTML = `B√†n 2 - Ch·ªçn m√≥n, tick v√†o m√≥n ƒë·ªÉ ch·ªçn v√† nh·∫•n "G·ª≠i order"!`;
            }
        }

        // Auto-generate QR codes when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Generate QR codes for demo tables
            setTimeout(() => {
                generateQR('table_1', 'B√†n 1');
                generateQR('table_2', 'B√†n 2');
            }, 1000);
        });

        // Simulate QR code scanning
        function simulateQRScan(tableId) {
            const url = `/mobile_menu?table_id=${tableId}`;
            window.open(url, '_blank');
        }

        // Add click handlers for QR code images
        document.addEventListener('DOMContentLoaded', function() {
            const qrImages = document.querySelectorAll('.qr-code img');
            qrImages.forEach(img => {
                img.style.cursor = 'pointer';
                img.title = 'Click ƒë·ªÉ m·ªü menu';
                img.addEventListener('click', function() {
                    const tableId = this.id.replace('qr-', '');
                    simulateQRScan(tableId);
                });
            });
        });
    </script>
</body>
</html>
